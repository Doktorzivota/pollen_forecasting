\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{presentationStructure}[2023/12/04 Template for Presentations]

\RequirePackage{lmodern}          % Latin Modern font
\RequirePackage[T1]{fontenc}      % Proper output encoding for accented Latin letters
\RequirePackage[utf8]{inputenc}   % UTF-8 input encoding
\RequirePackage[english]{babel}   % English language rules

\RequirePackage[english]{babel}

% Prevod naziva okvira
\addto\captionsenglish{%
  \renewcommand{\figurename}{Slika}
  \renewcommand{\tablename}{Tabela}
}


\RequirePackage{lmodern}
\RequirePackage{newtxmath}

\RequirePackage{xcolor,colortbl}
\RequirePackage{graphicx}
\RequirePackage{microtype}
\RequirePackage{hyperref}
\RequirePackage{subfig}
\RequirePackage{url}
\RequirePackage{placeins}
\RequirePackage{multirow}
\RequirePackage[figuresright]{rotating}
\RequirePackage{chemfig}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{tabularx}
\RequirePackage{booktabs}
\RequirePackage{bigints}
\RequirePackage{listingsutf8}
\RequirePackage{etoolbox}
\RequirePackage[final]{pdfpages}
\RequirePackage{bigstrut}
\RequirePackage{beamerthemesplit}
\RequirePackage{pgfpages}
\RequirePackage{tikz}
\RequirePackage{tkz-euclide}
\RequirePackage{caladea,carlito}   % fonts
\RequirePackage{caption}
\RequirePackage{newfloat}


\bibliographystyle{abntex2-custom/abntex2-alf.bst}

\usetikzlibrary{automata, arrows.meta, positioning, shapes}

\DeclareOption{hideSubsectionTitle}{
    \ifdefined\hide
    \else
        \newcommand{\hide}{}
    \fi
}

\ProcessOptions\relax

\ifdefined\hide
    \usetheme{Frankfurt}
\else
    \usetheme{Darmstadt}
\fi

\renewcommand{\familydefault}{\sfdefault}

% Colors for code highlighting
\definecolor{commentColor}{RGB}{150,150,150}
\definecolor{stringColor}{RGB}{206,123,0}
\definecolor{keywordColor}{RGB}{0,0,230}

\lstset{
    inputencoding=utf8/latin1,
    numbers=left,
    stepnumber=1,
    firstnumber=1,
    numberstyle=\footnotesize,
    extendedchars=true,
    breaklines=true,
    lineskip=0pt,
    frame=tb,
    basicstyle=\ttfamily\footnotesize,
    showstringspaces=false,
    stringstyle=\color{stringColor},
    commentstyle=\color{commentColor},
    keywordstyle=\color{keywordColor}
}

\newcolumntype{Y}{>{\centering\arraybackslash}X}

% Commands for title page
\newcommand{\titletext}[1]{\def\@titleLabel{#1}}
% \newcommand{\subtitle}[1]{\def\@subtitleLabel{#1}}
\newcommand{\name}[1]{\def\@nameLabel{#1}}
\newcommand{\authorname}[1]{\def\@authorLabel{#1}}
\newcommand{\advisor}[1]{\def\@advisorLabel{#1}}
\newcommand{\coadvisor}[1]{\def\@coadvisorLabel{#1}}
\newcommand{\course}[1]{\def\@courseLabel{#1}}
\newcommand{\location}[1]{\def\@locationLabel{#1}}
\newcommand{\daynum}[1]{\def\@dayLabel{#1}}
\newcommand{\monthname}[1]{\def\@monthLabel{#1}}
\newcommand{\yearnum}[1]{\def\@yearLabel{#1}}

% Beamer logo
\logo{%
    \begin{tikzpicture}[overlay,remember picture]%
    \node[left=0cm] at (current page.-27){%
        \includegraphics[scale=0.2]{images/logo}%
    };
    \end{tikzpicture}%
}

\beamertemplatenavigationsymbolsempty
\setbeamerfont{page number in head/foot}{size=\normalsize}
\setbeamertemplate{footline}[frame number]

% IFSP colors (kept)
\definecolor{IFSPEscuro}{RGB}{18, 47, 17}
\definecolor{IFSPPrimary}{RGB}{36, 93, 33}
\definecolor{IFSPSecondary}{RGB}{63, 112, 60}
\definecolor{IFSPTertiary}{RGB}{90, 140, 87}
\definecolor{IFSPQuaternary}{RGB}{125, 169, 123}
\definecolor{IFSPImportant}{RGB}{244, 57, 11}
\definecolor{IFSPExamples}{RGB}{22, 122, 233}

% Palette colors
\setbeamercolor*{palette primary}{bg=IFSPPrimary,fg=white}
\setbeamercolor*{palette secondary}{bg=IFSPSecondary,fg=white}
\setbeamercolor*{palette tertiary}{bg=IFSPTertiary,fg=white}
\setbeamercolor*{palette quaternary}{bg=IFSPQuaternary,fg=IFSPPrimary}
\setbeamercolor{palette sidebar primary}{bg=IFSPPrimary,fg=white}
\setbeamercolor{palette sidebar secondary}{bg=IFSPSecondary,fg=white}
\setbeamercolor{palette sidebar tertiary}{bg=IFSPTertiary,fg=white}
\setbeamercolor{palette sidebar quaternary}{bg=IFSPQuaternary,fg=white}
\setbeamercolor{structure}{fg=IFSPPrimary}
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=IFSPPrimary}
\setbeamercolor{section in head/foot}{bg=IFSPEscuro,fg=white}
\setbeamercolor{subsection in head/foot}{bg=IFSPSecondary,fg=white}

\newcommand{\footlinepayoff}[1]{\renewcommand{\@footlinepayoff}{#1}}

\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth,ht=5mm,dp=3mm,rightskip=1cm,leftskip=1cm]{footline}
  \insertframenumber/\inserttotalframenumber
  \ifstrempty{\@footlinepayoff}{}{%
    \usebeamerfont{footline}\hfill
  }
  \end{beamercolorbox}
}

\setbeamercolor{title}{fg=IFSPPrimary,bg=white}
\setbeamercolor{author}{fg=black}
\setbeamercolor{date}{fg=black}

\setbeamerfont{author}{size=\scriptsize}
\setbeamerfont{date}{size=\tiny}
\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{subtitle}{series=\mdseries,size=\footnotesize}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{framesubtitle}{series=\mdseries}
\setbeamerfont{footline}{size=\scriptsize}

\setbeamertemplate{blocks}[rounded]

\setbeamertemplate{itemize item}{\textbullet}
\setbeamertemplate{itemize subitem}{\textemdash}
\setbeamertemplate{itemize subsubitem}{\ensuremath{\circ}}

% Title page template
\setbeamertemplate{title page}{%
  \vskip0pt plus 1filll%
  \hspace{-12mm}
  \vspace{20mm}
  \begin{beamercolorbox}[wd=0.6\textwidth,sep=10pt,leftskip=8mm]{title}%
    {\ifdef{\@titleLabel}{{\usebeamerfont{title}\@titleLabel}{\ifdef{\@subtitleLabel}{{\usebeamerfont{title}:}}{}}}{}}
  
    {\ifdef{\@subtitleLabel}{{\usebeamerfont{subtitle}\@subtitleLabel}}{}}
    
    {\ifdef{\@courseLabel}{{\usebeamerfont{author}\usebeamercolor[fg]{author}\textbf{}\@courseLabel}}{}}
    
    {\ifdef{\@nameLabel}{{\usebeamerfont{author}\usebeamercolor[fg]{author}\@nameLabel}}{}}
    
    {\ifdef{\@authorLabel}{{\usebeamerfont{author}\usebeamercolor[fg]{author}\textbf{Student: }\@authorLabel}}{}}
    
    {\ifdef{\@advisorLabel}{{\usebeamerfont{author}\usebeamercolor[fg]{author}\textbf{Mentor: }\@advisorLabel}}{}}
    
    {\ifdef{\@coadvisorLabel}{\usebeamerfont{author}\usebeamercolor[fg]{author}\textbf{Co-advisor: }\@coadvisorLabel}{}}
  
    {\ifdef{\@locationLabel}{{\usebeamerfont{date}\usebeamercolor[fg]{date}\@locationLabel, \@monthLabel ~\@yearLabel}}{}}
  \end{beamercolorbox}
}

\setbeamercolor{alerted text}{fg=IFSPImportant}
\setbeamercolor{example text}{fg=IFSPExamples}
\setbeamercolor{block title}{bg=IFSPSecondary}

% Environment for custom blocks
\newenvironment{blockcustom}[3]{%
  \setbeamercolor{block body}{#2}
  \setbeamercolor{block title}{#3}
  \begin{block}{#1}}{\end{block}}

% Floating environment
\DeclareFloatingEnvironment[
  fileext = qos ,
  listname = {List of Tables} ,
  name = Table
]{tablecustom}

\newcommand{\citeauthorandyear}[1]{\citeauthoronline{#1} (\citeyear{#1})}

\endinput
